language: go
sudo: false
matrix:
  include:
  - go: 1.x
    env: VERSION=0.4.1

before_deploy:
- GOARCH=amd64 GOOS=linux CGO_ENABLED=0 go build boilr.go  && tar czvf boilr-$VERSION-linux_amd64.tgz boilr
- GOARCH=386   GOOS=linux CGO_ENABLED=0 go build boilr.go  && tar czvf boilr-$VERSION-linux_386.tgz boilr

- GOARCH=amd64 GOOS=darwin CGO_ENABLED=0 go build boilr.go && tar czvf boilr-$VERSION-darwin_amd64.tgz boilr
- GOARCH=386   GOOS=darwin CGO_ENABLED=0 go build boilr.go && tar czvf boilr-$VERSION-darwin_386.tgz boilr

deploy:
  provider: releases
  api_key:
    secure: yZlNku47CwznJ2N1kXNCLRCEj3EZkKlQv4l5KSyCPSMk2SKBAHUcHfvbj8ICVYer1OxMLQ0W8nsD9OR6GeGlMr8AioujGUzNDafNRB9Skr1444H9vjEFUrXsMbtPd3zJIMc1l3CkeQyafq9/zQaUGvDB/vGpTy5rjM2YvI46r3H4MsSeMOaJrynV2oxCgvdKsABcdEyulBYhStYzaxC02sJen3WOFa0yzXX56XcM92TNFr936hDrwm1Pn8/YhhOdniARppCsvnZg/PnIgZYJDg4s3+uCtLEkyNcuPMK7URZpTW/3Z2etto+1RBr7Ooc9hU1tb6JKMmZfzq+1f4xryn9eg15N9KPAVqYoLiugg22ZYCR7UcxpMiRUg8ZUvX7TZ+0chZHxSuR+UZHlgL8nQFlrpjD03TxEmzZtdF29dbEgwebEMpWgNgnXU2oEHcr99mu3ciNcSAqsmNlCnB9CWnj3LvX1oZabrbNPBh8Hp56B8yghcTfRXJZvNPKgyq4+epZcErZmSOdHE9fmMO05Vnh31u0uin7lXqUpNR+P2j/qolauhd3CLTeg4bYL2X3hM69Zwe+mJGdRc4XgkoJAWWRmP8IGjQLG6P15AFGLmgVYiplorZVO3SIKxinDGzzJHTuHFGXs1nl+cACiMcAofEobR9zchorFu7PSDUqziAU=
  file:
    - install
    - boilr-$VERSION-darwin_386.tgz
    - boilr-$VERSION-darwin_amd64.tgz
    - boilr-$VERSION-linux_386.tgz
    - boilr-$VERSION-linux_amd64.tgz
  skip_cleanup: true
  on:
    repo: Ilyes512/boilr
    branch: master
    tags: true

notifications:
  email:
    on_success: change
    on_failure: always
